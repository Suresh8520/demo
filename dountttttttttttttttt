stages:
  - stage: Download
    jobs:
      - job: DownloadJob
        steps:
          - powershell: |
              $repoUrl = 'https://github.source.internal.cba/ss99/powershell/archive/refs/heads/main.zip'
              $outputPath = 'C:\path\to\download\destination\main.zip'
              Invoke-WebRequest -Uri $repoUrl -OutFile $outputPath
            displayName: 'Download Git Repo'


# Set your Git credentials (replace with your actual username and token/password)
$gitUsername = "your_username"
$gitPassword = "your_token_or_password"

# Set the repository URL (replace with your repository URL)
$repoUrl = "https://github.com/your_username/your_private_repo.git"

# Set the target directory where the repository will be cloned
$clonePath = "C:\path\to\your\destination\folder"

# Construct the Git URL with credentials
$gitUrlWithCredentials = "https://$($gitUsername):$($gitPassword)@$repoUrl"

# Clone the repository
git clone $gitUrlWithCredentials $clonePath


# Clone the repository to the local directory
git clone --config --% --% `
    --config user.name=$gitConfig.UserName `
    --config user.email=$gitConfig.UserEmail `
    --config http.extraheader="AUTHORIZATION: ${headers.Authorization}" `
    $repositoryUrl $localDirectory

